(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[775],{7605:function(e,i,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/idea",function(){return n(9722)}])},9722:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return q}});var a=n(5893),r=n(4523),s=n(7294),t=n(8495),l=n(6817),o=Object.defineProperty,d=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,m=(e,i,n)=>i in e?o(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n,p=(e,i)=>{for(var n in i||(i={}))c.call(i,n)&&m(e,n,i[n]);if(d)for(var n of d(i))u.call(i,n)&&m(e,n,i[n]);return e},x=(0,l.k)((e,{spacing:i,breakpoints:n,cols:a,verticalSpacing:r})=>{let s=null!=r,t=(function(e,i){if(0===i.length)return i;let n="maxWidth"in i[0]?"maxWidth":"minWidth",a=[...i].sort((i,a)=>e.fn.size({size:a[n],sizes:e.breakpoints})-e.fn.size({size:i[n],sizes:e.breakpoints}));return"minWidth"===n?a.reverse():a})(e,n).reduce((n,a)=>{let t="maxWidth"in a?"max-width":"min-width",l=e.fn.size({size:"max-width"===t?a.maxWidth:a.minWidth,sizes:e.breakpoints});return n[`@media (${t}: ${l-("max-width"===t?1:0)}px)`]={gridTemplateColumns:`repeat(${a.cols}, minmax(0, 1fr))`,gap:`${e.fn.size({size:a.verticalSpacing||(s?r:i),sizes:e.spacing})}px ${e.fn.size({size:a.spacing||i,sizes:e.spacing})}px`},n},{});return{root:p({boxSizing:"border-box",display:"grid",gridTemplateColumns:`repeat(${a}, minmax(0, 1fr))`,gap:`${e.fn.size({size:s?r:i,sizes:e.spacing})}px ${e.fn.size({size:i,sizes:e.spacing})}px`},t)}}),h=Object.defineProperty,f=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable,b=(e,i,n)=>i in e?h(e,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[i]=n,w=(e,i)=>{for(var n in i||(i={}))g.call(i,n)&&b(e,n,i[n]);if(f)for(var n of f(i))j.call(i,n)&&b(e,n,i[n]);return e},v=(e,i)=>{var n={};for(var a in e)g.call(e,a)&&0>i.indexOf(a)&&(n[a]=e[a]);if(null!=e&&f)for(var a of f(e))0>i.indexOf(a)&&j.call(e,a)&&(n[a]=e[a]);return n};let y={breakpoints:[],cols:1,spacing:"md"},z=(0,s.forwardRef)((e,i)=>{let n=(0,t.N4)("SimpleGrid",y,e),{className:a,breakpoints:l,cols:o,spacing:d,verticalSpacing:c,children:u,unstyled:m}=n,p=v(n,["className","breakpoints","cols","spacing","verticalSpacing","children","unstyled"]),{classes:h,cx:f}=x({breakpoints:l,cols:o,spacing:d,verticalSpacing:c},{unstyled:m,name:"SimpleGrid"});return s.createElement(r.x,w({className:f(h.root,a),ref:i},p),u)});z.displayName="@mantine/core/SimpleGrid";var k=n(7564),C=n(7841),S=n(8049),_=n(61),N=n(3723),O=n(9876),E=n(9834),I=n(5117),P=n(4777),T=n(1232),$=n(4053),W=n(3991);function q(){let e=(0,$.useSupabaseClient)(),i=(0,$.useUser)(),[n,t]=(0,s.useState)(!1),[l,o]=(0,s.useState)(""),[d,c]=(0,s.useState)([]),[u,m]=(0,s.useState)(null),[p,x]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),[g,j]=(0,s.useState)([]),[b,w]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),[q,A]=(0,s.useState)(""),[K,G]=(0,s.useState)([]),[D,H]=(0,s.useState)(null),[L,U]=(0,s.useState)(!1),[X,F]=(0,s.useState)(""),[R,Z]=(0,s.useState)(""),[B,J]=(0,s.useState)(""),[M,Q]=(0,s.useState)(""),[V,Y]=(0,s.useState)([]),[ee,ei]=(0,s.useState)(!1),[en,ea]=(0,s.useState)(null),[er,es]=(0,s.useState)(0);async function et(){let{data:i,error:n}=await e.from("role").select("*").order("id",{ascending:!1});n?c([]):c(i)}async function el(i){if(i){let{data:n,error:a}=await e.from("trouble").select("*").eq("role_id",i.id).order("id",{ascending:!1});a?j([]):j(n)}}async function eo(){let{data:i,error:n}=await e.from("superpower").select("*").order("id",{ascending:!1});n?G([]):G(i)}async function ed(){let{data:i,error:n}=await e.from("idea_view").select("*").order("id",{ascending:!1});n?Y([]):Y(i)}return(0,s.useEffect)(()=>{et(),eo(),ed(),es(window.innerHeight/2);let e=()=>{es(window.innerHeight/2)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,a.jsxs)(r.x,{component:"div",children:[(0,a.jsxs)(z,{cols:3,children:[(0,a.jsxs)(k.K,{component:"div",className:"bg-cyan-50",children:[(0,a.jsx)(C.z,{onClick:()=>t(!0),children:"add"}),(0,a.jsxs)(S.u,{opened:n,onClose:()=>t(!1),children:[(0,a.jsx)(_.o,{label:"角色",placeholder:"...的人 ...的用户 ...爱好者 ...消费者",value:l,onChange:e=>o(e.target.value)}),(0,a.jsx)(C.z,{disabled:!l,onClick:async()=>{await e.from("role").insert([{user_id:i.id,role_name:l}]),t(!1),o(""),et()},children:"Submit"})]}),(0,a.jsx)(N.x,{sx:{height:"".concat(er-100,"px")},children:d.map(i=>(0,a.jsxs)(r.x,{component:"div",children:[(0,a.jsxs)(O.k,{gap:"sm",justify:"flex-start",align:"center",direction:"row",wrap:"nowrap",children:[(0,a.jsx)(E.A,{color:"blue",radius:"lg",variant:"filled",ml:"sm",onClick:async()=>{let{data:n,error:a}=await e.from("role").delete().eq("id","".concat(i.id));a&&alert(a.message),et()},children:(0,a.jsx)(W.IT9,{size:"1rem"})}),(0,a.jsx)(I.x,{mx:"xs",fz:"sm",style:{backgroundColor:u&&u.id===i.id?"rgb(6 182 212)":"transparent",cursor:"pointer"},onClick:()=>{m(i),el(i)},children:i.role_name})]}),(0,a.jsx)(P.i,{my:"xs",variant:"dashed"})]},i.id))})]}),(0,a.jsxs)(k.K,{component:"div",h:"auto",className:"bg-sky-50",children:[(0,a.jsx)(C.z,{disabled:!u,onClick:()=>x(!0),children:"add"}),(0,a.jsxs)(S.u,{opened:p,onClose:()=>x(!1),children:[(0,a.jsx)(_.o,{label:"Trouble",placeholder:"...很慢 ...很烦 ...很多 ...很难",value:h,onChange:e=>f(e.target.value)}),(0,a.jsx)(C.z,{disabled:!h,onClick:async()=>{await e.from("trouble").insert([{user_id:i.id,role_id:u.id,trouble_name:h}]),x(!1),el(u),f("")},children:"Submit"})]}),(0,a.jsx)(N.x,{sx:{height:"".concat(er-100,"px")},children:g.map(i=>(0,a.jsxs)(r.x,{component:"div",children:[(0,a.jsxs)(O.k,{gap:"sm",justify:"flex-start",align:"center",direction:"row",wrap:"nowrap",children:[(0,a.jsx)(E.A,{color:"blue",radius:"lg",variant:"filled",ml:"sm",onClick:async()=>{let{data:n,error:a}=await e.from("trouble").delete().eq("id","".concat(i.id));a&&alert(a.message),el(u)},children:(0,a.jsx)(W.IT9,{size:"1rem"})}),(0,a.jsx)(I.x,{mx:"xs",fz:"sm",style:{backgroundColor:b&&b.id===i.id?"rgb(14 165 233)":"transparent",cursor:"pointer"},onClick:()=>{w(i)},children:i.trouble_name})]}),(0,a.jsx)(P.i,{my:"xs",variant:"dashed"})]},i.id))})]}),(0,a.jsxs)(k.K,{component:"div",h:"auto",className:"bg-red-50 ",children:[(0,a.jsx)(C.z,{onClick:()=>y(!0),children:"add"}),(0,a.jsxs)(S.u,{opened:v,onClose:()=>y(!1),children:[(0,a.jsx)(_.o,{label:"Superpower",placeholder:"因为..SDK..算法能干..",value:q,onChange:e=>A(e.target.value)}),(0,a.jsx)(C.z,{disabled:!q,onClick:async()=>{await e.from("superpower").insert([{user_id:i.id,superpower_name:q}]),y(!1),eo(),A("")},children:"Submit"})]}),(0,a.jsx)(N.x,{sx:{height:"".concat(er-100,"px")},children:K.map(i=>(0,a.jsxs)(r.x,{component:"div",children:[(0,a.jsxs)(O.k,{gap:"sm",justify:"flex-start",align:"center",direction:"row",wrap:"nowrap",children:[(0,a.jsx)(E.A,{color:"blue",radius:"lg",variant:"filled",ml:"sm",onClick:async()=>{let{data:n,error:a}=await e.from("superpower").delete().eq("id","".concat(i.id));a&&alert(a.message),eo()},children:(0,a.jsx)(W.IT9,{size:"1rem"})}),(0,a.jsx)(I.x,{mx:"xs",fz:"sm",style:{backgroundColor:D&&D.id===i.id?"rgb(239 68 68)":"transparent",cursor:"pointer"},onClick:()=>{H(i)},children:i.superpower_name})]}),(0,a.jsx)(P.i,{my:"xs",variant:"dashed"})]},i.id))})]})]}),(0,a.jsxs)(O.k,{className:"w-full",justify:"center",align:"center",direction:"row",wrap:"nowrap",children:[(0,a.jsx)(C.z,{mx:"sm",disabled:!(u&&b&&D),onClick:()=>{U(!0)},children:"add idea"}),(0,a.jsxs)(S.u,{opened:L,onClose:()=>U(!1),children:[(0,a.jsx)(_.o,{label:"New Insight",placeholder:"可以(用..干..)",value:R,onChange:e=>Z(e.target.value)}),(0,a.jsx)(_.o,{label:"Idea Name",placeholder:"从而(使用户..)",value:X,onChange:e=>F(e.target.value)}),(0,a.jsx)(_.o,{label:"Advantage",placeholder:"我适合做这个产品因为..",value:B,onChange:e=>J(e.target.value)}),(0,a.jsx)(_.o,{label:"Keyword",placeholder:"推广用的关键词",value:M,onChange:e=>Q(e.target.value)}),(0,a.jsx)(C.z,{onClick:async()=>{await e.from("idea").insert([{user_id:i.id,superpower_id:D.id,role_id:u.id,trouble_id:b.id,idea_name:X,new_insight:R,advantage:B,keyword:M}]),U(!1),ed(),Z(""),F(""),J(""),Q("")},children:"Submit"})]})]}),(0,a.jsx)(N.x,{className:"bg-teal-50 ",sx:{height:"".concat(er-40,"px")},children:V.map(e=>(0,a.jsxs)(r.x,{component:"div",className:"w-full",children:[(0,a.jsx)(P.i,{my:"sm",variant:"dashed"}),(0,a.jsxs)(T.Z,{children:[(0,a.jsx)(E.A,{ml:"sm",color:"blue",radius:"xl",variant:"light",onClick:async()=>{ea(e),ei(!0)},children:(0,a.jsx)(W.jgU,{size:"1rem"})}),(0,a.jsx)(I.x,{fz:"sm",c:"dark",className:"w-[90%]",children:"".concat(e.role_name).concat(e.trouble_name,".因为").concat(e.superpower_name,",所以可以").concat(e.new_insight,",从而").concat(e.idea_name,".我适合做这个产品因为").concat(e.advantage,".产品推广关键词如下:").concat(e.keyword)})]})]},e.id))}),(0,a.jsx)(S.u,{opened:ee,onClose:()=>ei(!1),children:en&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(C.z,{onClick:async()=>{await e.from("idea").delete().eq("id",en.id),ei(!1),ed()},children:"Delete Idea"})})})]})}}},function(e){e.O(0,[584,967,874,774,888,179],function(){return e(e.s=7605)}),_N_E=e.O()}]);