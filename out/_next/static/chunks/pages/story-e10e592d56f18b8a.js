(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[802],{1311:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/story",function(){return n(8758)}])},8758:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var a=n(5893),o=n(7294),i=n(4053),r=n(4523),s=n(5117),c=n(4777),l=n(1232),u=n(7841),d=n(8495),m=n(917),f=n(6817);let h=(0,m.F4)({"from, to":{opacity:.4},"50%":{opacity:1}});var p=(0,f.k)((e,{height:t,width:n,radius:a,circle:o,animate:i})=>({root:{height:t,width:o?t:n,borderRadius:o?t:e.fn.radius(a),position:"relative",overflow:"hidden",WebkitTransform:"translateZ(0)"},visible:{"&::before":{content:'""',position:"absolute",background:"dark"===e.colorScheme?e.colors.dark[7]:e.white,top:0,bottom:0,left:0,right:0,zIndex:10},"&::after":{content:'""',position:"absolute",background:"dark"===e.colorScheme?e.colors.dark[4]:e.colors.gray[3],top:0,bottom:0,left:0,right:0,animation:i?`${h} 1500ms linear infinite`:"none",zIndex:11}}})),w=Object.defineProperty,x=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,y=(e,t,n)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))b.call(t,n)&&y(e,n,t[n]);if(x)for(var n of x(t))k.call(t,n)&&y(e,n,t[n]);return e},v=(e,t)=>{var n={};for(var a in e)b.call(e,a)&&0>t.indexOf(a)&&(n[a]=e[a]);if(null!=e&&x)for(var a of x(e))0>t.indexOf(a)&&k.call(e,a)&&(n[a]=e[a]);return n};let _={height:"auto",width:"100%",visible:!0,animate:!0},j=(0,o.forwardRef)((e,t)=>{let n=(0,d.N4)("Skeleton",_,e),{height:a,width:i,visible:s,animate:c,className:l,circle:u,radius:m,unstyled:f}=n,h=v(n,["height","width","visible","animate","className","circle","radius","unstyled"]),{classes:w,cx:x}=p({height:a,width:i,circle:u,radius:m,animate:c},{unstyled:f,name:"Skeleton"});return o.createElement(r.x,g({className:x(w.root,{[w.visible]:s},l),ref:t},h))});function S(){(0,i.useUser)();let e=(0,i.useSupabaseClient)(),[t,n]=(0,o.useState)({}),[d,m]=(0,o.useState)({}),[f,h]=(0,o.useState)(""),[p,w]=(0,o.useState)(""),[x,b]=(0,o.useState)(!1);async function k(t){let{data:a,error:o}=await e.from("tasks").select("*").eq("id",t);if(o){alert(o.message);return}console.log(a),n(a[0]),y(a[0].idea_id)}async function y(t){let{data:n,error:a}=await e.from("idea_view").select("*").eq("id",t);if(console.log(n),a){alert(a.message);return}m(n[0])}async function g(e,t){b(!0);let n=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:e}]})}),a=await n.json(),o=a.choices[0].message.content;t(o),b(!1)}return(0,o.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("taskid");k(t)},[]),(0,o.useEffect)(()=>{h("".concat(d.role_name," ").concat(d.trouble_name,".因为").concat(d.superpower_name,",所以可以").concat(d.new_insight,",从而").concat(d.idea_name,".我适合做这个产品因为").concat(d.advantage,".产品推广关键词如下:").concat(d.keyword))},[d]),(0,a.jsxs)(r.x,{component:"div",className:"w-full",px:"xs",children:[(0,a.jsx)(s.x,{children:f}),(0,a.jsx)(c.i,{my:"sm",variant:"dashed"}),(0,a.jsx)(s.x,{children:t.features}),(0,a.jsx)(c.i,{my:"sm",variant:"dashed"}),(0,a.jsxs)(l.Z,{position:"right",children:[(0,a.jsx)(u.z,{variant:"outline",onClick:async()=>{await g("产品名字叫做".concat(t.task_name,"\n 产品定位").concat(f," \n 产品功能 ").concat(t.features," \n 请生成推广Tweet \n要求包含emoji,包含产品关键功能,不要太浮夸,用中文输出:"),e=>{w(e)})},children:"生成推广tweet"}),(0,a.jsx)(u.z,{variant:"outline",onClick:async()=>{await g("产品名字叫做".concat(t.task_name,"\n 产品定位").concat(f," \n 产品功能 ").concat(t.features," \n请生成推广视频分镜"),e=>{w(e)})},children:"生成分镜"}),(0,a.jsx)(u.z,{variant:"outline",onClick:async()=>{await g("要求使用中文回答。产品名字叫做".concat(t.task_name,"\n 产品定位").concat(f," \n 产品功能 ").concat(t.features," \n 请以推广").concat(t.task_name,"为目的生成一个故事。"),e=>{w(e)})},children:"生成故事"})]}),x?(0,a.jsxs)(r.x,{mt:"sm",component:"div",children:[(0,a.jsx)(j,{height:8,radius:"xl"}),(0,a.jsx)(j,{height:8,mt:6,radius:"xl"}),(0,a.jsx)(j,{height:8,mt:6,width:"70%",radius:"xl"})]}):(0,a.jsx)(s.x,{mt:"sm",children:p})]})}j.displayName="@mantine/core/Skeleton"}},function(e){e.O(0,[307,774,888,179],function(){return e(e.s=1311)}),_N_E=e.O()}]);