(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[775],{7605:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/idea",function(){return i(9722)}])},9722:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return T}});var a=i(5893),r=i(4523),s=i(7294),t=i(8495),l=i(6817),o=Object.defineProperty,d=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,n,i)=>n in e?o(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,m=(e,n)=>{for(var i in n||(n={}))c.call(n,i)&&p(e,i,n[i]);if(d)for(var i of d(n))u.call(n,i)&&p(e,i,n[i]);return e},x=(0,l.k)((e,{spacing:n,breakpoints:i,cols:a,verticalSpacing:r})=>{let s=null!=r,t=(function(e,n){if(0===n.length)return n;let i="maxWidth"in n[0]?"maxWidth":"minWidth",a=[...n].sort((n,a)=>e.fn.size({size:a[i],sizes:e.breakpoints})-e.fn.size({size:n[i],sizes:e.breakpoints}));return"minWidth"===i?a.reverse():a})(e,i).reduce((i,a)=>{let t="maxWidth"in a?"max-width":"min-width",l=e.fn.size({size:"max-width"===t?a.maxWidth:a.minWidth,sizes:e.breakpoints});return i[`@media (${t}: ${l-("max-width"===t?1:0)}px)`]={gridTemplateColumns:`repeat(${a.cols}, minmax(0, 1fr))`,gap:`${e.fn.size({size:a.verticalSpacing||(s?r:n),sizes:e.spacing})}px ${e.fn.size({size:a.spacing||n,sizes:e.spacing})}px`},i},{});return{root:m({boxSizing:"border-box",display:"grid",gridTemplateColumns:`repeat(${a}, minmax(0, 1fr))`,gap:`${e.fn.size({size:s?r:n,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`},t)}}),h=Object.defineProperty,f=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,j=(e,n,i)=>n in e?h(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,w=(e,n)=>{for(var i in n||(n={}))g.call(n,i)&&j(e,i,n[i]);if(f)for(var i of f(n))b.call(n,i)&&j(e,i,n[i]);return e},v=(e,n)=>{var i={};for(var a in e)g.call(e,a)&&0>n.indexOf(a)&&(i[a]=e[a]);if(null!=e&&f)for(var a of f(e))0>n.indexOf(a)&&b.call(e,a)&&(i[a]=e[a]);return i};let y={breakpoints:[],cols:1,spacing:"md"},z=(0,s.forwardRef)((e,n)=>{let i=(0,t.N4)("SimpleGrid",y,e),{className:a,breakpoints:l,cols:o,spacing:d,verticalSpacing:c,children:u,unstyled:p}=i,m=v(i,["className","breakpoints","cols","spacing","verticalSpacing","children","unstyled"]),{classes:h,cx:f}=x({breakpoints:l,cols:o,spacing:d,verticalSpacing:c},{unstyled:p,name:"SimpleGrid"});return s.createElement(r.x,w({className:f(h.root,a),ref:n},m),u)});z.displayName="@mantine/core/SimpleGrid";var S=i(7564),_=i(7841),C=i(8049),k=i(61),N=i(3723),O=i(5117),E=i(4777),P=i(9876),$=i(1232),W=i(9834),I=i(4053),K=i(3991);function T(){let e=(0,I.useSupabaseClient)(),n=(0,I.useUser)(),[i,t]=(0,s.useState)(!1),[l,o]=(0,s.useState)(""),[d,c]=(0,s.useState)([]),[u,p]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),[g,b]=(0,s.useState)([]),[j,w]=(0,s.useState)(null),[v,y]=(0,s.useState)(!1),[T,G]=(0,s.useState)(""),[q,A]=(0,s.useState)([]),[D,H]=(0,s.useState)(null),[L,U]=(0,s.useState)(!1),[X,F]=(0,s.useState)(""),[R,Z]=(0,s.useState)(""),[B,J]=(0,s.useState)(""),[M,Q]=(0,s.useState)(""),[V,Y]=(0,s.useState)([]),[ee,en]=(0,s.useState)(!1),[ei,ea]=(0,s.useState)(null),[er,es]=(0,s.useState)(0);async function et(){let{data:n,error:i}=await e.from("role").select("*").order("id",{ascending:!1});i?c([]):c(n)}async function el(n){if(n){let{data:i,error:a}=await e.from("trouble").select("*").eq("role_id",n.id).order("id",{ascending:!1});a?b([]):b(i)}}async function eo(){let{data:n,error:i}=await e.from("superpower").select("*").order("id",{ascending:!1});i?A([]):A(n)}async function ed(){let{data:n,error:i}=await e.from("idea_view").select("*").order("id",{ascending:!1});i?Y([]):Y(n)}return(0,s.useEffect)(()=>{et(),eo(),ed(),es(window.innerHeight/2);let e=()=>{es(window.innerHeight/2)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,a.jsxs)(r.x,{component:"div",children:[(0,a.jsxs)(z,{cols:3,children:[(0,a.jsxs)(S.K,{component:"div",className:"bg-cyan-50",children:[(0,a.jsx)(_.z,{onClick:()=>t(!0),children:"add"}),(0,a.jsxs)(C.u,{opened:i,onClose:()=>t(!1),children:[(0,a.jsx)(k.o,{label:"角色",placeholder:"...的人 ...的用户 ...爱好者",value:l,onChange:e=>o(e.target.value)}),(0,a.jsx)(_.z,{disabled:!l,onClick:async()=>{await e.from("role").insert([{user_id:n.id,role_name:l}]),t(!1),o(""),et()},children:"Submit"})]}),(0,a.jsx)(N.x,{sx:{height:"".concat(er-100,"px")},children:d.map(e=>(0,a.jsxs)(r.x,{component:"div",children:[(0,a.jsx)(O.x,{mx:"xs",fz:"sm",style:{backgroundColor:u&&u.id===e.id?"rgb(6 182 212)":"transparent",cursor:"pointer"},onClick:()=>{p(e),el(e)},children:e.role_name}),(0,a.jsx)(E.i,{my:"xs",variant:"dashed"})]},e.id))})]}),(0,a.jsxs)(S.K,{component:"div",h:"auto",className:"bg-sky-50",children:[(0,a.jsx)(_.z,{disabled:!u,onClick:()=>x(!0),children:"add"}),(0,a.jsxs)(C.u,{opened:m,onClose:()=>x(!1),children:[(0,a.jsx)(k.o,{label:"Trouble",placeholder:"...很慢 ...很烦 ...很多 ...很难",value:h,onChange:e=>f(e.target.value)}),(0,a.jsx)(_.z,{disabled:!h,onClick:async()=>{await e.from("trouble").insert([{user_id:n.id,role_id:u.id,trouble_name:h}]),x(!1),el(u),f("")},children:"Submit"})]}),(0,a.jsx)(N.x,{sx:{height:"".concat(er-100,"px")},children:g.map(e=>(0,a.jsxs)(r.x,{component:"div",children:[(0,a.jsx)(O.x,{mx:"xs",fz:"sm",style:{backgroundColor:j&&j.id===e.id?"rgb(14 165 233)":"transparent",cursor:"pointer"},onClick:()=>{w(e)},children:e.trouble_name}),(0,a.jsx)(E.i,{my:"xs",variant:"dashed"})]},e.id))})]}),(0,a.jsxs)(S.K,{component:"div",h:"auto",className:"bg-red-50 ",children:[(0,a.jsx)(_.z,{onClick:()=>y(!0),children:"add"}),(0,a.jsxs)(C.u,{opened:v,onClose:()=>y(!1),children:[(0,a.jsx)(k.o,{label:"Superpower",placeholder:"因为..SDK..算法能干..",value:T,onChange:e=>G(e.target.value)}),(0,a.jsx)(_.z,{disabled:!T,onClick:async()=>{await e.from("superpower").insert([{user_id:n.id,superpower_name:T}]),y(!1),eo(),G("")},children:"Submit"})]}),(0,a.jsx)(N.x,{sx:{height:"".concat(er-100,"px")},children:q.map(e=>(0,a.jsxs)(r.x,{component:"div",children:[(0,a.jsx)(O.x,{mx:"xs",fz:"sm",style:{backgroundColor:D&&D.id===e.id?"rgb(239 68 68)":"transparent",cursor:"pointer"},onClick:()=>{H(e)},children:e.superpower_name}),(0,a.jsx)(E.i,{my:"xs",variant:"dashed"})]},e.id))})]})]}),(0,a.jsxs)(P.k,{className:"w-full",justify:"center",align:"center",direction:"row",wrap:"nowrap",children:[(0,a.jsx)(_.z,{mx:"sm",disabled:!(u&&j&&D),onClick:()=>{U(!0)},children:"add idea"}),(0,a.jsxs)(C.u,{opened:L,onClose:()=>U(!1),children:[(0,a.jsx)(k.o,{label:"New Insight",placeholder:"可以(用..干..)",value:R,onChange:e=>Z(e.target.value)}),(0,a.jsx)(k.o,{label:"Idea Name",placeholder:"从而(使用户..)",value:X,onChange:e=>F(e.target.value)}),(0,a.jsx)(k.o,{label:"Advantage",placeholder:"我适合做这个产品因为..",value:B,onChange:e=>J(e.target.value)}),(0,a.jsx)(k.o,{label:"Keyword",placeholder:"推广用的关键词",value:M,onChange:e=>Q(e.target.value)}),(0,a.jsx)(_.z,{onClick:async()=>{await e.from("idea").insert([{user_id:n.id,superpower_id:D.id,role_id:u.id,trouble_id:j.id,idea_name:X,new_insight:R,advantage:B,keyword:M}]),U(!1),ed(),Z(""),F(""),J(""),Q("")},children:"Submit"})]})]}),(0,a.jsx)(N.x,{className:"bg-teal-50 ",sx:{height:"".concat(er-40,"px")},children:V.map(e=>(0,a.jsxs)(r.x,{component:"div",className:"w-full",children:[(0,a.jsx)(E.i,{my:"sm",variant:"dashed"}),(0,a.jsxs)($.Z,{children:[(0,a.jsx)(W.A,{ml:"sm",color:"blue",radius:"xl",variant:"light",onClick:async()=>{ea(e),en(!0)},children:(0,a.jsx)(K.jgU,{size:"1rem"})}),(0,a.jsx)(O.x,{fz:"sm",c:"dark",className:"w-[90%]",children:"".concat(e.role_name).concat(e.trouble_name,".因为").concat(e.superpower_name,",所以可以").concat(e.new_insight,",从而").concat(e.idea_name,".我适合做这个产品因为").concat(e.advantage,".产品推广关键词如下:").concat(e.keyword)})]})]},e.id))}),(0,a.jsx)(C.u,{opened:ee,onClose:()=>en(!1),children:ei&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(_.z,{onClick:async()=>{await e.from("idea").delete().eq("id",ei.id),en(!1),ed()},children:"Delete Idea"})})})]})}}},function(e){e.O(0,[584,967,874,774,888,179],function(){return e(e.s=7605)}),_N_E=e.O()}]);